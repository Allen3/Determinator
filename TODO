Post-2004 TODOs:

- Consider changing 'gmake handin' to use something other than 
  email. Notably, in 2004 we had a bunch of students who, due to
  misconfigured local sendmail's etc, thought they had succeeded in
  handing something in when they really hadn't. Also, since they were 
  sending emails from non-standard accounts (e.g. root@ckehoe.mit.edu) 
  they weren't really expecting a confirmation / error email.
  
  Here are some alternative handin options: 
  (1) [6.097] Put the tarball in a public place and email us a URL. 
  (2) [6.170 etc] Set up the 6.828 locker on athena to have a sub-directory 
      for each user with the right ACL's. Then either init a CVS root for 
      each student and just use cvs commit/tag for the handin, or
      'gmake handin' just scp's the handin tarball to this directory. Run
      a script on amsterdam to collect all the handins from athena instead
      of having the spool file.
  (3) [6.824] Give students accounts on PDOS machines and basically do
      the same thing as (2) above.

- get rid of inc/args.h bogosity --E

- merge kern/*.h into kern/private.h --E

- no header files with the same name in kern/ and inc/ ? --E

- fewer header files! --E

- make all macros either smart or dumb --E

- add env_runs to earlier labs --E

- regularize int vs. unsigned for perm --E

- lab2: check that page_insert of same page on itself with different
  permissions actually changes permissions --E

- UTEMP should be a void* --E

- remove ROUND32 in favor of ROUNDUP32 --E

- delete #if 0...#endif debug block in env_pop_tf, as of lab4 it breaks
  peoples' code --E

- rename 'make patch' => 'make diff', 'make apply-patch' => 'make patch' --E

- rename 'page_clear' => 'page_initpp' or something else --E

- get rid of redundant page_initpp() in kern/pmap.c

- get rid of size parameter to load_icode,
  which is no longer needed now that we're using ELF.

  (No, keep it for potential sanity checking -- E)

- get rid of -Ttext 0x800020 for user programs
  (and maybe UTEXT #define?)

- also, link kernel for 0xF0100000 instead of 0xF0100020
  (no need to reserve space for a non-existent a.out header)

- rename alloc() to boot_alloc() in kern/pmap.c
  to clarify that it's one of the boot-time init functions.

- get rid of unnecessary GATE macro in inc/mmu.h?

- in lab 3, do trap handling before starting user processes?
  (i.e., test fault handling in the kernel before user space)

- in lab 3, make students implement something in lib/syscall.c again -
  e.g., everything except sys_cputs().

- need test programs to exercise permission checking in lab 4,
  and also to make sure studently has properly TRUP()d
  the trapframe pointer passed to sys_set_trapframe().

- put back "Then implement the ipc_recv and ipc_send functions in lib/ipc.c."
  in Exercise 11 of lab 4.

- don't embed a struct File in struct Filefd;
  it causes too much confusion.

After this year's class is over (fall 2003), we should:

- merge lab1, currently in the x86boot directory,
  properly into ossrc for consistency.

- rename PDMAP in inc/mmu.h to something more meaningful
  and consistent with the name of BY2PG...
  Maybe BY2PG => PGBYTES, and PDMAP => PDBYTES?

- clean up pp->ref_count protocol -
  e.g., have page_alloc increment the ref_count
  rather than leaving the caller to do it?

- Clean up #include blocks at the beginning of header files,
  so that conditional "#if LAB >= N" ones are at the end.

- Get rid of xstacktop parameter to sys_set_pgfault_handler

- Organize all the test programs in user/ a bit better,
  maybe in a separate test/ directory?

- Update lab4 so IPC can transfer page mappings

Also, (copied from Russ's E-mail):

	minishell in kernel - console i/o very early

	tie v6 to bsd/linux with special lecture at end of v6
		more mentions throughout

	tie x86 to v6 lectures more

	drop l3 in favor of good microkernel intro (amoeba?)

	replace ras with queued locks?  multiprocessor?

	use osdi soft updates

	io-lite?

	kill lab 1 to move everything up,
	more room at end

	challenge points accrued throughout semester

	more comments and less code


---
New TODO items for Fall 2004:

- change kernel link address from 0xf0100020 to 0xf0100000;
	we no longer need to reserve the 0x20 for the a.out header
	since we're now using ELF!


- decide on one of u_int and u_long, and only use it.  Also add some
	sort of paddr_t and use it for physical addresses.  Maybe do
	the same thing for virtual addresses.


--- 

The Plan - December 13, 2004

UCLA type changes
UCLA makefile changes
	gmake patch
move IDT -> earlier lab
see list at top of file
	utext -> appropriate place for elf
Austin's trap frame and UTF code
rework header files
file server
window server

